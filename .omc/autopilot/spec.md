# Reride 앱 개발 사양서

## 1. 프로젝트 개요

**Reride**는 AI 기반 스노보드 영상 분석 및 캐릭터 애니메이션 서비스입니다.
사용자가 스노보드 영상을 업로드하면 AI가 트릭을 분석하고, 2D 캐릭터 애니메이션으로 변환하여 SNS에 공유할 수 있게 합니다.

## 2. 현재 상태

### 완료된 항목 ✅
- AI 파이프라인 (MediaPipe 포즈 추출 → LSTM 트릭 분류 → 캐릭터 애니메이션)
- FastAPI 백엔드 프레임워크 (라우터 구조)
- Docker 개발 환경 (PostgreSQL, Redis)
- 데이터베이스 모델 (User, Video, Analysis)

### 미완성 항목 ⚠️
- 백엔드 서비스 레이어 (비즈니스 로직)
- Flutter 모바일 앱 (전혀 시작 안함)
- 결제 시스템
- 사용자 인증 완성

---

## 3. 기능 요구사항

### 3.1 사용자 인증
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 회원가입 | 이메일/비밀번호 | MVP |
| 소셜 로그인 | 카카오, 구글 | MVP |
| 로그인/로그아웃 | JWT 토큰 기반 | MVP |
| 비밀번호 재설정 | 이메일 인증 | Phase 2 |

### 3.2 영상 업로드 및 관리
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 영상 업로드 | 갤러리/카메라에서 선택 | MVP |
| 업로드 진행률 | 진행 상태 표시 | MVP |
| 영상 목록 | 내 영상 리스트 조회 | MVP |
| 영상 삭제 | 업로드한 영상 삭제 | MVP |

### 3.3 AI 분석
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 분석 요청 | 업로드된 영상 분석 시작 | MVP |
| 분석 상태 | 진행률 표시 (0-100%) | MVP |
| 분석 결과 | 트릭 목록, 점수, 피드백 | MVP |
| 하이라이트 | 주요 장면 15초 편집 | MVP |

### 3.4 캐릭터 애니메이션
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 애니메이션 생성 | 분석 결과 → 캐릭터 영상 | MVP |
| 애니메이션 재생 | 앱 내 영상 플레이어 | MVP |
| 스타일 선택 | 캐릭터 스타일 (1-2종) | MVP |
| 다운로드 | 기기에 저장 | MVP |

### 3.5 공유
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| SNS 공유 | 인스타그램, 틱톡 공유 | MVP |
| 링크 공유 | 웹 링크로 공유 | MVP |
| 워터마크 | 무료 버전 워터마크 | MVP |

### 3.6 결제 (Phase 2)
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 구독 플랜 | 월/연 구독 | Phase 2 |
| 건별 결제 | 1회성 분석권 | Phase 2 |
| 결제 내역 | 결제 이력 조회 | Phase 2 |

---

## 4. 비기능 요구사항

### 4.1 성능
- 영상 업로드: 100MB 이하 영상 30초 이내 업로드
- AI 분석: 1분 영상 기준 3분 이내 완료
- 앱 응답: 모든 화면 전환 500ms 이내

### 4.2 사용자 경험
- 한국어 우선 지원
- 직관적인 UI (최소 3탭 이내 주요 기능 접근)
- 오프라인 시 캐시된 결과 조회 가능

### 4.3 보안
- 영상 데이터 암호화 전송 (HTTPS)
- 사용자 비밀번호 해싱 (bcrypt)
- JWT 토큰 만료 관리

### 4.4 확장성
- 동시 분석 요청 10개 처리 가능
- 사용자 1,000명 기준 설계

---

## 5. 기술 스택

### Backend
- Python 3.11+
- FastAPI
- SQLAlchemy + PostgreSQL
- Celery + Redis
- S3 (영상 저장)

### AI/ML
- MediaPipe (포즈 추출)
- PyTorch (LSTM 트릭 분류)
- OpenCV (영상 처리)

### Frontend
- Flutter (Dart)
- iOS/Android 크로스 플랫폼

### Infrastructure
- Docker
- AWS (EC2, S3, CloudFront)

---

## 6. MVP 범위

### 포함 (In Scope)
1. 이메일/소셜 로그인
2. 영상 업로드
3. AI 분석 (트릭 분류, 점수, 피드백)
4. 캐릭터 애니메이션 생성
5. SNS 공유
6. 기본 프로필

### 제외 (Out of Scope)
- 결제 시스템 (Phase 2)
- 커뮤니티 기능 (리더보드, 갤러리)
- 3D 캐릭터
- 글로벌 버전 (영어, 일본어)
- B2B 기능

---

## 7. 개발 작업 목록

### 7.1 백엔드 (서비스 레이어 완성)
- [ ] video_service.py - 영상 업로드/조회/삭제 비즈니스 로직
- [ ] analysis_service.py - 분석 요청/결과 조회 로직
- [ ] auth_service.py - 인증 비즈니스 로직
- [ ] S3 연동 완성 (storage.py)
- [ ] Celery 워커 완성 (analyze_video.py)
- [ ] FCM 푸시 알림

### 7.2 Flutter 앱 (신규 개발)
- [ ] 프로젝트 초기화 및 구조 설정
- [ ] 스플래시/온보딩 화면
- [ ] 로그인/회원가입 화면
- [ ] 홈 화면 (내 영상 목록)
- [ ] 영상 업로드 화면
- [ ] 분석 결과 화면
- [ ] 캐릭터 애니메이션 뷰어
- [ ] 프로필/설정 화면
- [ ] API 연동 (Dio)
- [ ] 상태 관리 (Riverpod)

### 7.3 통합 및 테스트
- [ ] 백엔드-프론트 API 연동 테스트
- [ ] AI 파이프라인 통합 테스트
- [ ] E2E 테스트 시나리오

---

## 8. 예상 파일 구조

### Backend (추가/수정 필요)
```
backend/app/services/
├── __init__.py
├── auth_service.py      # 신규
├── video_service.py     # 신규
├── analysis_service.py  # 신규
└── notification_service.py  # 신규
```

### Frontend (신규)
```
frontend/
├── lib/
│   ├── main.dart
│   ├── app/
│   │   ├── routes.dart
│   │   └── theme.dart
│   ├── features/
│   │   ├── auth/
│   │   ├── video/
│   │   ├── analysis/
│   │   └── profile/
│   ├── core/
│   │   ├── api/
│   │   ├── models/
│   │   └── providers/
│   └── shared/
│       ├── widgets/
│       └── utils/
├── pubspec.yaml
└── README.md
```
